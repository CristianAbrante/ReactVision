(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{182:function(e){e.exports={items:[{title:"File",options:[{name:"Load image",id:"load_img"},{name:"Save image",id:"save_img"}]},{title:"Lineal point operations",options:[{name:"Black and white",id:"black_white"},{name:"Lineal picewise adjustment",id:"lineal_adjustment"},{name:"brightness and contrast",id:"brightness_contrast"}]},{title:"Non lineal point operations",options:[{name:"Histogram equalization",id:"histogram_equalization"},{name:"Histogram specification",id:"histogram_specification"},{name:"Gamma Correction",id:"gamma_correction"},{name:"Image difference",id:"image_difference"},{name:"Changes detection",id:"changes_detection"},{name:"Cross Image Selection",id:"cross_image"},{name:"Quantization",id:"image_quantization"}]},{title:"Geometric operations",options:[{name:"Image flipper",id:"image_flipper"},{name:"Transpose image",id:"image_transpose"},{name:"Scale image",id:"scale_image"},{name:"Custom rotation",id:"rotation"},{name:"Entire rotation",id:"rotate_image"}]}]}},185:function(e){e.exports={formats:[{name:"RAW",extension:"raw"},{name:"TIFF",extension:"tiff"},{name:"JPG",extension:"jpg"},{name:"PNG",extension:"png"},{name:"JPEG",extension:"jpeg"}]}},197:function(e,t,a){e.exports=a(405)},202:function(e,t,a){},204:function(e,t,a){},285:function(e,t,a){},330:function(e,t){},332:function(e,t){},403:function(e,t,a){},405:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(25),o=a.n(i),l=(a(202),a(2)),s=a(6),c=a(8),u=a(7),g=a(9),m=(a(204),a(26)),h=a.n(m),d=a(27),p=a.n(d),f=a(180),v=a.n(f),b=a(129),y=a.n(b),E=a(29),C=a.n(E),I=a(179),x=a.n(I),O=a(130),A=a.n(O),S=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={anchorEl:null,open:!1},a.handleToggle=function(){a.setState(function(e){return{open:!e.open}})},a.handleClose=function(e){if(!a.anchorEl.contains(e.target)){a.setState({open:!1});var t=e.target.id;a.props.updateAction(t)}},a.handleOutClose=function(){a.setState({open:!1})},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.options,n=t.title,i=this.state.open;return r.a.createElement("div",null,r.a.createElement(h.a,{buttonRef:function(t){e.anchorEl=t},"aria-owns":i?"menu-list-grow":void 0,"aria-haspopup":"true",onClick:this.handleToggle},n),r.a.createElement(x.a,{open:i,anchorEl:this.anchorEl,transition:!0,disablePortal:!0},function(t){var n=t.TransitionProps,i=t.placement;return r.a.createElement(y.a,Object.assign({},n,{id:"menu-list-grow",style:{transformOrigin:"bottom"===i?"center top":"center bottom"}}),r.a.createElement(C.a,null,r.a.createElement(v.a,{onClickAway:e.handleOutClose},r.a.createElement(A.a,null,a.map(function(t){return r.a.createElement(p.a,{key:t.id,id:t.id,onClick:e.handleClose},t.name)})))))}))}}]),t}(n.Component),j=(a(285),function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"title"},r.a.createElement("a",{href:"https://github.com/CristianAbrante/ReactVision"},r.a.createElement("span",{className:"first"},"react"),r.a.createElement("span",{className:"second"},"vision")))}}]),t}(n.Component)),M=a(181),w=a.n(M),N=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.items;return r.a.createElement(C.a,null,r.a.createElement(w.a,null,r.a.createElement(j,null),t.map(function(t){return r.a.createElement(S,{key:t.title,title:t.title,options:t.options,updateAction:e.props.updateAction})})))}}]),t}(n.Component),k=a(182),_=a(10),P=a(134),V=a.n(P),L=a(49),H=a.n(L),R=a(63),F=a.n(R),X=a(35),T=a.n(X),B=a(131),D=a.n(B),W=a(88),G=a.n(W),U=a(100),z=a.n(U),q=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.options,t=e.accumulative,a=e.red,n=e.green,i=e.blue,o=e.disableColors;return r.a.createElement(T.a,null,r.a.createElement(D.a,null,"Histogram Options"),r.a.createElement(H.a,null),r.a.createElement(V.a,{row:!0},r.a.createElement(F.a,{control:r.a.createElement(G.a,{checked:t,value:"accumulative",onChange:this.props.onHistogramOption}),label:"accumulative"}),r.a.createElement(F.a,{control:r.a.createElement(G.a,{checked:o,value:"brightness",onChange:this.props.onBrightnessOption}),label:"brightness"})),r.a.createElement(V.a,{row:!0,style:{margin:"auto"}},r.a.createElement(F.a,{control:r.a.createElement(z.a,{checked:a,value:"red",onChange:this.props.onColorOptions("red"),disabled:o}),label:"red"}),r.a.createElement(F.a,{control:r.a.createElement(z.a,{checked:n,value:"green",onChange:this.props.onColorOptions("green"),disabled:o}),label:"green"}),r.a.createElement(F.a,{control:r.a.createElement(z.a,{checked:i,value:"blue",onChange:this.props.onColorOptions("blue"),disabled:o}),label:"blue"})))}}]),t}(n.Component),K=a(24),Q={r:"#d32f2f",g:"#43a047",b:"#1976d2",brightness:"#bdbdbd"},J=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).getSeries=function(e){var t=a.props.accumulative,n=a.props.currentHistogram;if("brightness"===e){if(!a.props.brightness)return null;var r=n.getFormattedData(e,t);return a.getDataSeries(r,Q[e])}if(a.props.brightness)return null;if(a.props[e]){var i=n.getFormattedData(e,t);return a.getDataSeries(i,Q[e])}return null},a.getDataSeries=function(e,t){return r.a.createElement(K.a,{curve:"curve-natural",color:t,opacity:"0.2",data:e})},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(K.b,{onMouseLeave:this._onMouseLeave,height:180,margin:{left:10,right:10,top:10,bottom:40},stackBy:"y"},r.a.createElement(K.e,null),r.a.createElement(K.c,null),r.a.createElement(K.f,{hideLine:!0,tickValues:[0,50,100,150,200,250]}),this.getSeries("r"),this.getSeries("g"),this.getSeries("b"),this.getSeries("brightness")))}}]),t}(n.Component),Y=a(33),$=a.n(Y),Z=a(18),ee=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).getImageProperty=function(e){var t=a.props.histogram;return void 0===t?"-":t.getImage()[e]()},a.getHistogramProperty=function(e){var t=a.props.histogram;if(void 0===t)return"-";var n=t[e]().brightness;return n%1===0?n:n.toFixed(3)},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",null,r.a.createElement("div",{className:e.root},r.a.createElement($.a,{label:"format: "+this.getImageProperty("getFormat"),color:"secondary",className:e.chip}),r.a.createElement($.a,{label:"count: "+this.getImageProperty("getNumberOfPixels"),color:"secondary",className:e.chip}),r.a.createElement($.a,{label:"width: "+this.getImageProperty("getWidth"),color:"secondary",className:e.chip}),r.a.createElement($.a,{label:"height: "+this.getImageProperty("getHeight"),color:"secondary",className:e.chip})),r.a.createElement("div",{className:e.root},r.a.createElement($.a,{label:"brightness: "+this.getHistogramProperty("getMean"),color:"primary",className:e.chip}),r.a.createElement($.a,{label:"contrast: "+this.getHistogramProperty("getStdVar"),color:"primary",className:e.chip}),r.a.createElement($.a,{label:"entropy: "+this.getHistogramProperty("getEntropy"),color:"primary",className:e.chip})),r.a.createElement("div",{className:e.root},r.a.createElement($.a,{label:"min: "+this.getHistogramProperty("getMin"),color:"secondary",className:e.chip}),r.a.createElement($.a,{label:"max: "+this.getHistogramProperty("getMax"),color:"secondary",className:e.chip})))}}]),t}(n.Component),te=Object(Z.withStyles)(function(e){return{root:{display:"flex",justifyContent:"center",flexWrap:"wrap"},chip:{margin:e.spacing.unit/4}}})(ee),ae=Object(Z.createMuiTheme)({palette:{primary:{light:"#ffffff",main:"#eceff1",dark:"#babdbe",contrastText:"#000000"},secondary:{light:"#f05545",main:"#b71c1c",dark:"#7f0000",contrastText:"#ffffff"}},typography:{useNextVariants:!0}}),ne=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={accumulative:!1,red:!0,green:!0,blue:!0,disableColors:!1},a.renderHistogram=function(){var e=a.props.controller.getCurrentHistogram();return void 0===e?r.a.createElement("div",{style:{height:"180px",background:ae.palette.primary.main,margin:"10px 10px 30px"}}):r.a.createElement("div",{style:{padding:"20px"}},r.a.createElement(J,{accumulative:a.state.accumulative,brightness:a.state.disableColors,r:a.state.red,g:a.state.green,b:a.state.blue,currentHistogram:e}))},a.handleBrightnessVisualization=function(){a.setState({disableColors:!a.state.disableColors})},a.handleHistogramVisualization=function(){a.setState({accumulative:!a.state.accumulative})},a.handleColorsVisualization=function(e){return function(t){a.setState(Object(_.a)({},e,t.target.checked))}},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.controller.getCurrentHistogram();return r.a.createElement(C.a,{style:{height:"100%"}},r.a.createElement(q,{options:this.state,onHistogramOption:this.handleHistogramVisualization,onColorOptions:this.handleColorsVisualization,onBrightnessOption:this.handleBrightnessVisualization}),this.renderHistogram(),r.a.createElement(te,{histogram:e}))}}]),t}(n.Component),re=a(23),ie=a.n(re),oe=function e(t,a,n,r){var i=this;Object(l.a)(this,e),this.getTitle=function(){return i.title},this.getFormat=function(){return i.format},this.getNumberOfStates=function(){return i.dataHistory.length},this.isAnyState=function(){return 0!==i.getNumberOfStates()},this.createNewState=function(){if(i.isAnyState()){var e=i.getCurrentStateData().slice();i.setNewState(e,i.getWidth(),i.getHeight())}},this.createNewBlankState=function(e,t){for(var a=[],n=e*t*4,r=0;r<n;r++)a.push(0);i.setNewState(a,e,t)},this.setNewState=function(e,t,a){for(var n={width:t,height:a,data:e};i.isAnyState()&&i.dataHistoryIndex!==i.getNumberOfStates()-1;)i.dataHistory.pop();i.dataHistory.push(n)},this.setInitialState=function(){i.dataHistoryIndex=0},this.setPreviousState=function(){0!==i.dataHistoryIndex&&(i.dataHistoryIndex-=1)},this.setNextState=function(){i.dataHistoryIndex!==i.getNumberOfStates()-1&&(i.dataHistoryIndex+=1)},this.getImageData=function(){return new ImageData(new Uint8ClampedArray(i.getCurrentStateData()),i.getWidth(),i.getHeight())},this.getCurrentState=function(){return i.dataHistory[i.dataHistoryIndex]},this.getCurrentStateData=function(){return i.getCurrentState().data},this.getWidth=function(){return i.getCurrentState().width},this.getHeight=function(){return i.getCurrentState().height},this.getNumberOfPixels=function(){return i.getWidth()*i.getHeight()},this.indexesAreInRange=function(e,t){return e>=0&&e<i.getWidth()&&t>=0&&t<i.getHeight()},this.getColorIndex=function(e,t){return i.indexesAreInRange(e,t)?t*(4*i.getWidth())+4*e:void 0},this.getComponent=function(e){return i.getCurrentStateData()[e]},this.setComponent=function(e,t){i.getCurrentStateData()[e]=t},this.getColor=function(t,a,n){if("brightness"===n)return i.getBrightness(t,a);var r=e.colorComponent[n];if(void 0===r)throw new Error("unknown component: "+n);var o=i.getColorIndex(t,a);if(void 0===o)throw new Error("("+t+", "+a+") are not in range.");return i.getComponent(o+r)},this.setColor=function(t,a,n,r){if("brightness"!==n){if(!e.colorIsInRange(r))throw new Error("color is not in range: "+r);var o=e.colorComponent[n];if(void 0===o)throw new Error("unknown component: "+n);var l=i.getColorIndex(t,a);if(void 0===l)throw new Error("("+t+", "+a+") are not in range.");i.setComponent(l+o,r)}else i.setBrightness(t,a,r)},this.getRedComponent=function(e,t){return i.getColor(e,t,"r")},this.setRedComponent=function(e,t,a){i.setColor(e,t,"r",a)},this.getGreenComponent=function(e,t){return i.getColor(e,t,"g")},this.setGreenComponent=function(e,t,a){i.setColor(e,t,"g",a)},this.getBlueComponent=function(e,t){return i.getColor(e,t,"b")},this.setBlueComponent=function(e,t,a){i.setColor(e,t,"b",a)},this.getAlphaComponent=function(e,t){return i.getColor(e,t,"a")},this.setAlphaComponent=function(e,t,a){i.setColor(e,t,"a",a)},this.getBrightness=function(e,t){var a=i.getRGBComponents(e,t);return Math.round(.222*a.r+.707*a.g+.071*a.b)},this.setBrightness=function(e,t,a){i.setRGBComponents(e,t,a,a,a)},this.getRGBComponents=function(e,t){return{r:i.getRedComponent(e,t),g:i.getGreenComponent(e,t),b:i.getBlueComponent(e,t)}},this.setRGBComponents=function(e,t,a,n,r){i.setRedComponent(e,t,a),i.setGreenComponent(e,t,n),i.setBlueComponent(e,t,r)},this.getRGBAComponents=function(e,t){var a=i.getRGBComponents(e,t);return{r:a.r,g:a.g,b:a.b,a:i.getAlphaComponent(e,t)}},this.setRGBAComponets=function(e,t,a,n,r,o){i.setRGBComponents(e,t,a,n,r),i.setAlphaComponent(e,t,o)},this.title=t.replace(/\..+/i,""),this.format=t.split(".").pop(),this.dataHistory=[],this.dataHistorySizes=[],this.dataHistoryIndex=0,void 0===r?this.createNewBlankState():this.setNewState(r,a,n)};oe.MIN_PIXEL_VALUE=0,oe.MAX_PIXEL_VALUE=256,oe.colorComponent={r:0,g:1,b:2,a:3},oe.colorIsInRange=function(e){return e>=oe.MIN_PIXEL_VALUE&&e<oe.MAX_PIXEL_VALUE};var le=oe,se=a(184),ce=a.n(se),ue=function(){function e(){var t=this;Object(l.a)(this,e),this.getReadFile=function(){return t.image},this.setImage=function(e){var a=e.shape,n=3===a.length?a[0]:a[1],r=3===a.length?a[1]:a[2];t.image=new le(t.fileName,n,r,e.data)}}return Object(s.a)(e,[{key:"getImageData",value:function(){return this.imageData}},{key:"load",value:function(t,a){var n=this;if(!t.files)throw new Error("browser do not support image loading");var r=t.files[0];if(this.fileName=r.name,!e.isAnImage(r))throw new Error("should load a valid image file.");var i=new FileReader;i.onload=function(){ce()(i.result,function(e,t){if(e)throw new Error(e.message);n.setImage(t),a()})},i.readAsDataURL(r)}}],[{key:"isAnImage",value:function(e){return e.type.includes("image")}}]),e}(),ge=a(194),me=a(87),he=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).action=r.a.createElement(me.a,{color:"secondary",size:"small",onClick:a.props.handler},"close"),a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(ge.a,{anchorOrigin:{vertical:"top",horizontal:"right"},open:this.props.open,onClose:this.props.handler,ContentProps:{"aria-describedby":"message-id"},message:this.props.errorMsg,action:this.action})}}]),t}(n.Component),de=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={error:!1,errorMsg:"error"},a.handleError=function(e){a.setState({error:!0,errorMsg:e})},a.closeError=function(e){a.setState({error:!1})},a.handleChange=function(e){var t=new ue,n=a.props.controller;try{t.load(a.inputElem.current,function(){var e=t.getReadFile();n.add(e)})}catch(e){a.handleError(e.message)}},a.openFileDialog=function(){a.inputElem.current.click()},a.inputElem=r.a.createRef(),a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.inputElem.current.click()}},{key:"componentDidUpdate",value:function(){this.inputElem.current.click()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("input",{ref:this.inputElem,type:"file",style:{display:"none"},onChange:this.handleChange}),r.a.createElement(he,{open:this.state.error,errorMsg:this.state.errorMsg,handler:this.closeError}))}}]),t}(n.Component),pe=a(68),fe=a(57),ve=a.n(fe),be=a(44),ye=a.n(be),Ee=a(48),Ce=a.n(Ee),Ie=a(185),xe=a(186),Oe=a.n(xe),Ae=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={format:"",error:!1,errorMsg:"error",labelWidth:0},a.handleError=function(e){a.setState({error:!0,errorMsg:e})},a.handleFormChange=function(e){a.setState(Object(_.a)({},e.target.name,e.target.value))},a.closeError=function(e){a.setState({error:!1})},a.saveFile=function(){try{if(a.props.controller.numberOfImages()<=0)throw new Error("there isn't any image to download.");if(""===a.state.format)throw new Error("you have to select one image format.");var e=a.props.controller,t=a.state.format;e.getCanvas().toBlob(function(a){Oe()(a,e.getSelectedImage().getTitle()+"."+t)})}catch(n){a.handleError(n.message)}},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.setState({labelWidth:o.a.findDOMNode(this.InputLabelRef).offsetWidth})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=Ie.formats;return r.a.createElement("div",null,r.a.createElement(ie.a,{variant:"overline",style:{padding:"4px 0"}},"Save image"),r.a.createElement(pe.a,null),r.a.createElement("div",null,r.a.createElement(T.a,{variant:"outlined",className:t.formControl},r.a.createElement(Ce.a,{ref:function(t){e.InputLabelRef=t},htmlFor:"outlined-format-simple"},"Format"),r.a.createElement(ye.a,{value:this.state.format,onChange:this.handleFormChange,input:r.a.createElement(ve.a,{labelWidth:this.state.labelWidth,name:"format",id:"outlined-format-simple"})},a.map(function(e){return r.a.createElement(p.a,{key:e.extension,value:e.extension},e.name)})))),r.a.createElement("div",null,r.a.createElement(me.a,{className:t.button,label:"Save file",onClick:this.saveFile},"Download")),r.a.createElement(he,{open:this.state.error,errorMsg:this.state.errorMsg,handler:this.closeError}))}}]),t}(n.Component),Se=Object(Z.withStyles)(function(e){return{formControl:{margin:e.spacing.unit,width:100},button:{margin:e.spacing.unit}}})(Ae),je=a(46),Me=a.n(je),we=function e(t){var a=this;Object(l.a)(this,e),this.fillTable=function(e){a.values=[];for(var t=0;t<le.MAX_PIXEL_VALUE;t++)a.appendValue(e.perform(t))},this.getValue=function(e){return a.inputIsValid(e)?a.values[e]:void 0},this.appendValue=function(e){a.inputIsValid(e)&&a.values.push(e)},this.inputIsValid=function(e){return e>=0&&e<le.MAX_PIXEL_VALUE},this.fillTable(t)},Ne=function e(){Object(l.a)(this,e),this.perform=function(e){return e}},ke=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).applyOperation=function(){var e=a.props.controller;if(e.isAnyImageSelected()){if(!a.operationHasBeenApplied){var t=e.getSelectedImage();t.createNewState(),t.setNextState(),a.operationHasBeenApplied=!0}var n=new Ne,r=new we(n);e.applyPointOperation(r,"brightness")}},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(h.a,{variant:"fab",color:"secondary","aria-label":"Add",onClick:this.applyOperation},r.a.createElement(Me.a,null)))}}]),t}(n.Component),_e=a(55),Pe=a.n(_e),Ve=a(32),Le=a.n(Ve),He=function e(t,a){var n=this;Object(l.a)(this,e),this.get=function(e){if(void 0===e)throw new Error("x is undefined.");return n.a*e+n.b},this.setEquationComponents=function(e,t){if(void 0===e||void 0===t)throw new Error("points can not be undefined.");if(e.x===t.x)throw new Error("points x coordinate can not be equal.");n.a=(t.y-e.y)/(t.x-e.x),n.b=e.y-n.a*e.x},this.setEquationComponents(t,a)},Re=le.MIN_PIXEL_VALUE,Fe=le.MAX_PIXEL_VALUE-1,Xe=function e(){var t=this;Object(l.a)(this,e),this.insert=function(e){if(!t.valueIsValid(e.x)||!t.valueIsValid(e.y))throw new Error("point has not valid values: "+e.x+" "+e.y);if(e.x===Fe)t.points.pop(),t.points.push(e);else{var a=t.getIntervalIndex(e.x);t.points[a-1].x===e.x?t.points.splice(a-1,1,e):t.points.splice(a,0,e)}t.setFunctions()},this.perform=function(e){if(!t.valueIsValid(e))throw new Error("level is not in range.");var a=t.getIntervalIndex(e)-1,n=t.functions[a].get(e);return t.clampValue(n)},this.getIntervalIndex=function(e){for(var a=1;a<t.points.length;a++)if(e<t.points[a].x)return a;return t.points.length-1},this.setFunctions=function(){t.functions=[];for(var e=0;e<t.points.length-1;e++){var a=t.points[e],n=t.points[e+1];t.functions.push(new He(a,n))}},this.valueIsValid=function(e){return e>=Re&&e<=Fe},this.clampValue=function(e){return e<Re?Re:e>Fe?Fe:Math.round(e)};var a={x:Re,y:Re},n={x:Fe,y:Fe};this.points=[a,n],this.setFunctions()},Te=12,Be=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).operationHasBeenApplied=!1,a.state={x:0,y:0,linealPicewiseOperation:null,maxPointsReached:!1},a.applyOperation=function(){var e=a.props.controller;if(e.isAnyImageSelected()){if(!a.operationHasBeenApplied){var t=e.getSelectedImage();t.createNewState(),t.setNextState(),a.operationHasBeenApplied=!0}var n=new we(a.state.linealPicewiseOperation);e.applyPointOperation(n,"brightness")}},a.onChipDelete=function(e){return function(){console.log(e.x+" "+e.y)}},a.updateState=function(){a.setState({linealPicewiseOperator:a.state.linealPicewiseOperation})},a.onInsertionValueChanged=function(e){return function(t){var n=t.target.value;n>=le.MIN_PIXEL_VALUE&&n<le.MAX_PIXEL_VALUE&&a.setState(Object(_.a)({},e,n))}},a.addPoint=function(){var e=a.state,t=e.x,n=e.y,r=e.linealPicewiseOperation;t=Number.parseFloat(t),n=Number.parseFloat(n),"string"!==typeof t&&"string"!==typeof n&&(r.insert({x:t,y:n}),r.points.length===Te&&a.setState({maxPointsReached:!0}),a.updateState(),a.applyOperation())},a.state.linealPicewiseOperation=new Xe,a.applyOperation(),a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state.linealPicewiseOperation.points;return r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(Le.a,{style:{padding:"5px"}},"insert_chart_outlined"),r.a.createElement(ie.a,{variant:"overline"},"Linear piecewise adjustment")),r.a.createElement(H.a,null),r.a.createElement("div",{style:{display:"flex",justifyContent:"center",width:"100%"}},r.a.createElement(K.g,{width:200,height:200},r.a.createElement(K.c,null),r.a.createElement(K.e,null),r.a.createElement(K.f,null),r.a.createElement(K.h,null),r.a.createElement(K.d,{color:ae.palette.secondary.main,data:e}))),r.a.createElement("div",null,e.map(function(e){return r.a.createElement($.a,{key:"x: "+e.x+" y: "+e.y,style:{margin:"5px"},label:"x: "+e.x+" y: "+e.y,color:"secondary",variant:"outlined"})})),r.a.createElement("div",null,r.a.createElement(Pe.a,{style:{margin:"15px"},label:"X",value:this.state.x,type:"number",InputLabelProps:{shrink:!0},margin:"normal",onChange:this.onInsertionValueChanged("x")}),r.a.createElement(Pe.a,{style:{margin:"15px"},label:"Y",value:this.state.y,type:"number",InputLabelProps:{shrink:!0},margin:"normal",onChange:this.onInsertionValueChanged("y")})),r.a.createElement("div",null,r.a.createElement(h.a,{mini:!0,variant:"fab",color:"secondary","aria-label":"Add",onClick:this.addPoint,disabled:this.state.maxPointsReached},r.a.createElement(Me.a,null))))}}]),t}(n.Component),De=a(80),We=a.n(De),Ge=function e(t,a,n,r){var i=this;Object(l.a)(this,e),this.setOldMean=function(e){i.valueIsValid(e)&&(i.oldMean=e)},this.setOldStdVar=function(e){i.valueIsValid(e)&&(i.oldStdVar=e)},this.setNewMean=function(e){i.valueIsValid(e)&&(i.newMean=e)},this.setNewStdVar=function(e){i.valueIsValid(e)&&(i.newStdVar=e)},this.perform=function(e){if(void 0!==e){var t=Math.round(i.newStdVar/i.oldStdVar*(e-i.oldMean)+i.newMean);return i.clampValue(t)}},this.valueIsValid=function(e){return e>=le.MIN_PIXEL_VALUE&&e<le.MAX_PIXEL_VALUE},this.clampValue=function(e){return e<le.MIN_PIXEL_VALUE?le.MIN_PIXEL_VALUE:e>=le.MAX_PIXEL_VALUE?le.MAX_PIXEL_VALUE-1:e},this.setOldMean(t),this.setNewMean(n),this.setOldStdVar(n),this.setNewStdVar(r)},Ue={root:{width:420,display:"flex",justifyContent:"flex-start",alignItems:"center",alignContent:"space-between",margin:"auto"},slider:{width:"200px",margin:"auto",padding:"22px 0px"},thumb:{background:ae.palette.secondary.main}},ze=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).operationHasBeenApplied=!1,a.state={brightnessValue:0,contrastValue:0},a.applyOperation=function(){var e=a.props.controller;if(e.isAnyImageSelected()){if(!a.operationHasBeenApplied){var t=e.getSelectedImage();t.createNewState(),t.setNextState(),a.operationHasBeenApplied=!0}var n=a.state,r=n.brightnessValue,i=n.contrastValue;a.brightnessAndContrast.setNewMean(r),a.brightnessAndContrast.setNewStdVar(i);var o=new we(a.brightnessAndContrast);e.applyPointOperation(o,"brightness")}},a.onBrightnessSliderChange=function(e,t){a.setState({brightnessValue:t}),a.applyOperation()},a.onBrightnessTextFieldChange=function(e){var t=e.target.value;t<le.MAX_PIXEL_VALUE&&t>=le.MIN_PIXEL_VALUE&&a.setState({brightnessValue:Number.parseFloat(e.target.value)}),a.applyOperation()},a.onContrastSliderChange=function(e,t){a.setState({contrastValue:t}),a.applyOperation()},a.onContrastTextFieldChange=function(e){var t=e.target.value;t<le.MAX_PIXEL_VALUE&&t>=le.MIN_PIXEL_VALUE&&a.setState({contrastValue:e.target.value}),a.applyOperation()};var n=a.props.controller;a.brightnessAndContrast=new Ge(0,0,0,0);var r=n.getCurrentHistogram();return void 0!==r&&(a.state.brightnessValue=r.getMean().brightness,a.state.contrastValue=r.getStdVar().brightness,a.brightnessAndContrast.setOldMean(a.state.brightnessValue),a.brightnessAndContrast.setOldStdVar(a.state.contrastValue)),a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.brightnessValue,n=t.contrastValue;return r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(Le.a,{style:{padding:"5px"}},"brightness_5"),r.a.createElement(ie.a,{variant:"overline"},"Brightness and contrast")),r.a.createElement(H.a,null),r.a.createElement("div",null,r.a.createElement("div",{className:e.root},r.a.createElement(ie.a,{id:"label",style:{padding:"15px"}},"Brightness"),r.a.createElement(We.a,{classes:{container:e.slider,track:e.thumb,thumb:e.thumb},min:le.MIN_PIXEL_VALUE,max:le.MAX_PIXEL_VALUE-1,value:a,"aria-labelledby":"label",onChange:this.onBrightnessSliderChange}),r.a.createElement(Pe.a,{style:{margin:"15px"},id:"standard-number",value:a,type:"number",className:e.textField,max:255,margin:"normal",onChange:this.onBrightnessTextFieldChange,color:"secondary"})),r.a.createElement("div",{className:e.root},r.a.createElement(ie.a,{id:"label",style:{padding:"15px"}},"Contrast"),r.a.createElement(We.a,{classes:{container:e.slider,track:e.thumb,thumb:e.thumb},min:le.MIN_PIXEL_VALUE,max:le.MAX_PIXEL_VALUE-1,value:n,"aria-labelledby":"label",onChange:this.onContrastSliderChange}),r.a.createElement(Pe.a,{style:{margin:"15px"},id:"standard-number",value:n,type:"number",className:e.textField,max:255,margin:"normal",onChange:this.onContrastTextFieldChange,color:"secondary"}))))}}]),t}(n.Component),qe=Object(Z.withStyles)(Ue)(ze),Ke=le.MIN_PIXEL_VALUE,Qe=le.MAX_PIXEL_VALUE-1,Je=function e(t){var a=this;Object(l.a)(this,e),this.perform=function(e){return a.clampValue(Math.round(a.histogram.getAccumulativeCount(e).brightness/a.k)-1)},this.valueIsValid=function(e){return e>=Ke&&e<=Qe},this.clampValue=function(e){return e<Ke?Ke:e>Qe?Qe:Math.round(e)},this.histogram=t,this.k=this.histogram.getNumberOfPixels()/Qe},Ye=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).applyOperation=function(){var e=a.props.controller;if(e.isAnyImageSelected()&&!a.operationHasBeenApplied){var t=e.getSelectedImage(),n=e.getCurrentHistogram();t.createNewState(),t.setNextState();var r=new Je(n),i=new we(r);e.applyPointOperation(i,"brightness"),a.operationHasBeenApplied=!0}},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(Le.a,{style:{padding:"5px"}},"gradient"),r.a.createElement(ie.a,{variant:"overline"},"Histogram Equalization")),r.a.createElement(H.a,null),r.a.createElement(h.a,{style:{margin:"10px"},variant:"extendedFab",color:"secondary",onClick:this.applyOperation},"Apply Equalization"))}}]),t}(n.Component),$e=a(41),Ze=a.n($e),et=a(36),tt=a.n(et),at=a(40),nt=a.n(at),rt=le.MIN_PIXEL_VALUE,it=le.MAX_PIXEL_VALUE-1,ot=function e(t,a){var n=this;Object(l.a)(this,e),this.perform=function(e){if(!n.valueIsValid(e))throw new Error("invalid level: "+e);for(var t=n.toTransformHistogram.getAccumulativeProbability(e).brightness,a=0;a<=it;){if(n.referenceHistogram.getAccumulativeProbability(a).brightness>=t)return a;a+=1}},this.valueIsValid=function(e){return e>=rt&&e<=it},this.toTransformHistogram=t,this.referenceHistogram=a},lt=a(39),st=a.n(lt),ct=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).operationHasBeenApplied=!1,a.state={referenceHistogramTitle:"",referenceHistogram:void 0},a.applyOperation=function(){console.log("clicked");var e=a.props.controller,t=a.state.referenceHistogram;if(e.isAnyImageSelected()&&void 0!==t){var n=e.getSelectedImage();a.operationHasBeenApplied||((n=e.getSelectedImage()).createNewState(),n.setNextState(),a.operationHasBeenApplied=!0);var r=e.getCurrentHistogram();a.histogramSpecificationOperation=new ot(r,t);var i=new we(a.histogramSpecificationOperation);e.applyPointOperation(i,"brightness")}},a.handleChange=function(e){var t=a.props.controller,n=e.target.value,r=t.getImageIndex(n),i=t.histograms[r];a.setState({referenceHistogramTitle:n,referenceHistogram:i})},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.controller,t=e.getImageTitles();return r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(Ze.a,{style:{padding:"5px"}},"gradient"),r.a.createElement(tt.a,{variant:"overline"},"Histogram Specification")),r.a.createElement(nt.a,null),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement(T.a,{style:{minWidth:200,margin:ae.spacing.unit}},r.a.createElement(Ce.a,{htmlFor:"age-simple"},"Reference Image"),r.a.createElement(ye.a,{value:this.state.referenceHistogramTitle,inputProps:{name:"referenceHistogram",id:"age-simple"},onChange:this.handleChange,disabled:!e.isAnyImageSelected()},t.map(function(e){return r.a.createElement(p.a,{key:e,value:e},e)}))),r.a.createElement(st.a,{style:{margin:"10px"},variant:"extendedFab",color:"secondary",onClick:this.applyOperation},"Apply Specification")))}}]),t}(n.Component),ut=a(47),gt=a.n(ut),mt=a(28),ht=a.n(mt),dt=le.MIN_PIXEL_VALUE,pt=le.MAX_PIXEL_VALUE-1,ft=function e(t){var a=this;Object(l.a)(this,e),this.setGamma=function(t){t>e.GAMMA_MIN&&t<=e.GAMMA_MAX&&(a.gamma=t)},this.perform=function(e){if(!a.valueIsValid(e))throw new Error("level is not valid: "+e);var t=pt*Math.pow(e/pt,a.gamma);return a.clampValue(t)},this.valueIsValid=function(e){return e>=dt&&e<=pt},this.clampValue=function(e){return e<dt?dt:e>pt?pt:Math.round(e)},this.setGamma(t)};ft.GAMMA_MIN=0,ft.GAMMA_MAX=20;var vt=ft,bt={root:{width:420,display:"flex",justifyContent:"flex-start",alignItems:"center",alignContent:"space-between",margin:"auto"},slider:{width:"150px",margin:"auto"},thumb:{background:ae.palette.secondary.main}},yt=vt.GAMMA_MIN+1,Et=vt.GAMMA_MAX,Ct=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).operationHasBeenApplied=!1,a.state={inverted:!1,gamma:yt},a.applyOperation=function(){var e=a.props.controller;if(e.isAnyImageSelected()){if(!a.operationHasBeenApplied){var t=e.getSelectedImage();t.createNewState(),t.setNextState(),a.operationHasBeenApplied=!0}console.log(a.getGammaValue());var n=new vt(a.getGammaValue()),r=new we(n);e.applyPointOperation(r,"brightness")}},a.getGammaData=function(){for(var e=[],t=0;t<1;t+=.01)e.push({x:t,y:Math.pow(t,a.getGammaValue())});return e},a.invertedChecked=function(e){a.setState({inverted:e.target.checked})},a.getGammaValue=function(){return a.state.inverted?1/a.state.gamma:a.state.gamma},a.onGammaChange=function(e,t){a.setState({gamma:t})},a.onGammaTextChange=function(e){var t=Number.parseFloat(e.target.value);t>=yt&&t<=Et&&a.setState({gamma:t})},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(Ze.a,{style:{padding:"5px"}},"desktop_windows"),r.a.createElement(tt.a,{variant:"overline"},"Gamma correction")),r.a.createElement(nt.a,null),r.a.createElement("div",{style:{display:"flex",justifyContent:"center",width:"100%"}},r.a.createElement(K.g,{width:200,height:200},r.a.createElement(K.c,null),r.a.createElement(K.e,null),r.a.createElement(K.f,null),r.a.createElement(K.h,null),r.a.createElement(K.d,{curve:"curveMonotoneX",color:ae.palette.secondary.main,data:this.getGammaData()}))),r.a.createElement("div",{className:e.root},r.a.createElement(F.a,{control:r.a.createElement(G.a,{checked:this.state.inverted,onChange:this.invertedChecked,value:"checkedA"}),label:"inverse"}),r.a.createElement(gt.a,{classes:{container:e.slider,track:e.thumb,thumb:e.thumb},min:yt,max:Et,value:this.state.gamma,"aria-labelledby":"label",onChange:this.onGammaChange}),r.a.createElement(ht.a,{style:{margin:"15px"},value:this.state.gamma,type:"number",margin:"normal",onChange:this.onGammaTextChange,color:"secondary"})),r.a.createElement(st.a,{style:{margin:"10px"},variant:"extendedFab",color:"secondary",onClick:this.applyOperation},"Apply Gamma Correction"))}}]),t}(n.Component),It=Object(Z.withStyles)(bt)(Ct),xt=a(59),Ot=a.n(xt),At=a(86),St=a.n(At),jt=a(60),Mt=a.n(jt),wt=a(58),Nt=a.n(wt),kt=function e(){var t=this;Object(l.a)(this,e),this.perform=function(e,a){if(!t.imagesHaveTheSameSize(e,a))throw new Error("images do not have the same size");var n=e.getWidth(),r=e.getHeight();t.resultImage=new le("difference.png",n,r);for(var i=0;i<n;i++)for(var o=0;o<r;o++){var l=e.getBrightness(i,o),s=a.getBrightness(i,o),c=Math.abs(l-s);t.resultImage.setBrightness(i,o,c),t.resultImage.setAlphaComponent(i,o,255)}},this.imagesHaveTheSameSize=function(e,t){return e.getWidth()===t.getWidth()&&e.getHeight()===t.getHeight()}},_t=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={imageTitle:"",referenceImage:void 0,error:!1,errorMsg:""},a.applyOperation=function(){var e=a.props.controller,t=a.state.referenceImage;if(e.isAnyImageSelected()&&void 0!==t){var n=new kt,r=e.getSelectedImage();try{n.perform(r,t),e.add(n.resultImage)}catch(i){a.setState({error:!0,errorMsg:i.message})}}},a.closeError=function(){a.setState({error:!1})},a.handleChange=function(e){var t=a.props.controller,n=e.target.value,r=t.getImageIndex(n),i=t.images[r];a.setState({imageTitle:n,referenceImage:i})},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.controller,t=e.getImageTitles();return r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(Ze.a,{style:{padding:"5px"}},"photo library"),r.a.createElement(tt.a,{variant:"overline"},"Image Difference")),r.a.createElement(nt.a,null),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement(Ot.a,{style:{minWidth:200,margin:ae.spacing.unit}},r.a.createElement(St.a,{htmlFor:"age-simple"},"Reference Image"),r.a.createElement(Mt.a,{value:this.state.imageTitle,inputProps:{name:"referenceHistogram",id:"age-simple"},onChange:this.handleChange,disabled:!e.isAnyImageSelected()},t.map(function(e){return r.a.createElement(Nt.a,{key:e,value:e},e)}))),r.a.createElement(st.a,{style:{margin:"10px"},variant:"extendedFab",color:"secondary",onClick:this.applyOperation},"Apply Difference")),r.a.createElement(he,{open:this.state.error,errorMsg:this.state.errorMsg,handler:this.closeError}))}}]),t}(n.Component),Pt=function e(t){var a=this;Object(l.a)(this,e),this.perform=function(e,t){var n=new kt;n.perform(e,t),a.resultImage=n.resultImage;for(var r=0;r<a.resultImage.getWidth();r++)for(var i=0;i<a.resultImage.getHeight();i++)a.resultImage.getBrightness(r,i)>a.threshold&&a.resultImage.setRGBComponents(r,i,255,0,0)},this.threshold=t},Vt={root:{width:420,display:"flex",justifyContent:"flex-start",alignItems:"center",alignContent:"space-between",margin:"auto"},slider:{width:"150px",margin:"auto"},thumb:{background:ae.palette.secondary.main}},Lt=le.MIN_PIXEL_VALUE,Ht=le.MAX_PIXEL_VALUE-1,Rt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={imageTitle:"",referenceImage:void 0,error:!1,errorMsg:"",threshold:0},a.applyOperation=function(){var e=a.props.controller,t=a.state.referenceImage;if(e.isAnyImageSelected()&&void 0!==t){var n=new Pt(a.state.threshold),r=e.getSelectedImage();try{n.perform(r,t),e.add(n.resultImage)}catch(i){a.setState({error:!0,errorMsg:i.message})}}},a.closeError=function(){a.setState({error:!1})},a.handleChange=function(e){var t=a.props.controller,n=e.target.value,r=t.getImageIndex(n),i=t.images[r];a.setState({imageTitle:n,referenceImage:i})},a.onThresholdChange=function(e,t){a.setState({threshold:t})},a.onThresholdTextChange=function(e){var t=Number.parseFloat(e.target.value);t>=Lt&&t<=Ht&&a.setState({threshold:t})},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.controller,a=e.classes,n=t.getImageTitles();return r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(Ze.a,{style:{padding:"5px"}},"photo library"),r.a.createElement(tt.a,{variant:"overline"},"Image Difference")),r.a.createElement(nt.a,null),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.a.createElement(Ot.a,{style:{minWidth:200,margin:ae.spacing.unit}},r.a.createElement(St.a,{htmlFor:"age-simple"},"Reference Image"),r.a.createElement(Mt.a,{value:this.state.imageTitle,inputProps:{name:"referenceHistogram",id:"age-simple"},onChange:this.handleChange,disabled:!t.isAnyImageSelected()},n.map(function(e){return r.a.createElement(Nt.a,{key:e,value:e},e)}))),r.a.createElement("div",{className:a.root},r.a.createElement(gt.a,{classes:{container:a.slider,track:a.thumb,thumb:a.thumb},min:Lt,max:Ht,value:this.state.threshold,"aria-labelledby":"label",onChange:this.onThresholdChange}),r.a.createElement(ht.a,{style:{margin:"15px"},value:this.state.threshold,type:"number",margin:"normal",onChange:this.onThresholdTextChange,color:"secondary"})),r.a.createElement(st.a,{style:{margin:"10px"},variant:"extendedFab",color:"secondary",onClick:this.applyOperation},"Detect changes")),r.a.createElement(he,{open:this.state.error,errorMsg:this.state.errorMsg,handler:this.closeError}))}}]),t}(n.Component),Ft=Object(Z.withStyles)(Vt)(Rt);var Xt=function(e){return r.a.createElement(K.b,{height:180,margin:{left:10,right:10,top:10,bottom:40},stackBy:"y"},r.a.createElement(K.e,null),r.a.createElement(K.c,null),r.a.createElement(K.f,{hideLine:!0}),r.a.createElement(K.d,{data:e.data,color:ae.palette.secondary.main}))},Tt=a(133),Bt=a.n(Tt),Dt=a(132),Wt=a.n(Dt),Gt=a(187),Ut=a.n(Gt),zt=function(){function e(t,a,n,r){var i=this;Object(l.a)(this,e),this.crossSelection=[],this.derivativeCrossSelection=[],this.radius=1,this.setRadius=function(t){e.isAValidRadius(t)&&(i.radius=t)},this.setReferenceImage=function(e){void 0!==e&&(i.referenceImage=e,i.crossSelection=[],i.derivativeCrossSelection=[])},this.setCrossSelection=function(e,t){if(void 0===i.referenceImage)throw new Error("reference image is undefined.");if(!i.pixelIsInRange(e))throw new Error("pixel {"+e.x+", "+e.y+"} is not in range.");if(!i.pixelIsInRange(t))throw new Error("pixel {"+t.x+", "+t.y+"} is not in range.");var a=Ut()(e.x,e.y,t.x,t.y);i.crossSelection=[],i.derivativeCrossSelection=[];for(var n=0;n<a.length;n++){var r=a[n],o=i.getColor(r),l=i.getDerivativeColor(a,n);i.addData(i.crossSelection,r,o),i.addData(i.derivativeCrossSelection,r,l)}},this.getFormattedCrossSelection=function(){return i.getFormattedData(i.crossSelection)},this.getFormattedDerivativeSelection=function(){return i.getFormattedData(i.derivativeCrossSelection)},this.getColor=function(e){for(var t=0,a=0,n=e.x-i.radius;n<=e.x+i.radius;n++)for(var r=e.y-i.radius;r<=e.y+i.radius;r++){var o=i.getNormalizedColor(n,r);void 0!==o&&(t+=o,a+=1)}return t/a},this.getDerivativeColor=function(e,t){if(t>=0&&t<e.length){var a=e[t];if(t===e.length-1)return a;var n=e[t+1],r=i.getColor(a);return i.getColor(n)-r}},this.addData=function(e,t,a){e.push({x:t.x,y:t.y,color:a})},this.getFormattedData=function(e){for(var t=[],a=0,n=0;n<e.length;n++){var r=e[n];t.push({x:a,y:r.color}),a+=1}return t},this.pixelIsInRange=function(e){return e.x>=0&&e.x<i.referenceImage.getWidth()&&e.y>=0&&e.y<i.referenceImage.getHeight()},this.getNormalizedColor=function(e,t){try{return i.referenceImage.getBrightness(e,t)}catch(a){return}},this.setReferenceImage(t),this.setRadius(a),this.setCrossSelection(n,r)}return Object(s.a)(e,null,[{key:"isAValidRadius",value:function(e){return e>=this.MIN_RADIUS&&e<=this.MAX_RADIUS}}]),e}();zt.MIN_RADIUS=0,zt.MAX_RADIUS=10;var qt=zt,Kt={root:{width:420,display:"flex",justifyContent:"flex-start",alignItems:"center",alignContent:"space-between",margin:"auto"},slider:{width:"150px",margin:"auto"},thumb:{background:ae.palette.secondary.main}},Qt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={crossImageSelection:void 0,derivative:!1,radius:0,beginPoint:{x:0,y:0},endPoint:{x:0,y:0}},a.applyOperation=function(){var e=a.props.controller;if(e.isAnyImageSelected()){var t=e.getSelectedImage();a.setState({crossImageSelection:a.getSectionOperation(t,a.state.radius,a.state.beginPoint,a.state.endPoint)}),a.displaySectionLine()}},a.getSectionOperation=function(e,t,a,n){return new qt(e,t,a,n)},a.getData=function(){if(void 0!==a.state.crossImageSelection)return a.state.derivative?a.state.crossImageSelection.getFormattedDerivativeSelection():a.state.crossImageSelection.getFormattedCrossSelection()},a.onInsertionValueChanged=function(e,t){return function(n){var r=a.props.controller.getSelectedImage(),i=Number.parseInt(n.target.value);if(void 0!==r&&void 0!==i){var o={x:"x"===t?i:a.state[e].x,y:"y"===t?i:a.state[e].y};a.pointIsValid(o,r)&&a.setState(Object(_.a)({},e,o))}}},a.onSwitchChecked=function(e){return function(t){a.setState(Object(_.a)({},e,t.target.checked))}},a.pointIsValid=function(e,t){return e.x>=0&&e.x<t.getWidth()&&e.y>=0&&e.y<t.getHeight()},a.displaySectionLine=function(){var e=function(e,t){e.arc(t.x,t.y,3,0,2*Math.PI,!1),e.fillStyle="red",e.fill()},t=a.state,n=t.beginPoint,r=t.endPoint,i=a.props.controller;i.updateImageCanvas();var o=i.getCanvas().getContext("2d");o.beginPath(),o.moveTo(n.x,n.y),o.lineTo(r.x,r.y),o.lineWidth=2,o.strokeStyle="red",o.stroke(),e(o,n),e(o,r)},a.onRadiusChanged=function(e,t){a.setState({radius:t})},a.onRadiusTextChange=function(e){var t=Number.parseInt(e.target.value);qt.isAValidRadius(t)&&a.setState({gamma:t})},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(Ze.a,{style:{padding:"5px"}},"timeline"),r.a.createElement(tt.a,{variant:"overline"},"Cross Image Selection")),r.a.createElement(nt.a,null),r.a.createElement("div",null,r.a.createElement(Wt.a,{control:r.a.createElement(Bt.a,{checked:this.state.derivative,onChange:this.onSwitchChecked("derivative"),value:"checkedA"}),label:"derivative"})),r.a.createElement("div",null,r.a.createElement(Xt,{data:this.getData()}),r.a.createElement("div",{className:e.root},r.a.createElement(gt.a,{classes:{container:e.slider,track:e.thumb,thumb:e.thumb},min:qt.MIN_RADIUS,max:qt.MAX_RADIUS,step:1,value:this.state.radius,"aria-labelledby":"label",onChange:this.onRadiusChanged}),r.a.createElement(ht.a,{style:{margin:"15px"},value:this.state.radius,type:"number",margin:"normal",onChange:this.onRadiusTextChange,color:"secondary"})),r.a.createElement("div",null,r.a.createElement(ht.a,{style:{margin:"15px"},label:"X",value:this.state.beginPoint.x,type:"number",InputLabelProps:{shrink:!0},margin:"normal",onChange:this.onInsertionValueChanged("beginPoint","x")}),r.a.createElement(ht.a,{style:{margin:"15px"},label:"Y",value:this.state.beginPoint.y,type:"number",InputLabelProps:{shrink:!0},margin:"normal",onChange:this.onInsertionValueChanged("beginPoint","y")})),r.a.createElement("div",null,r.a.createElement(ht.a,{style:{margin:"15px"},label:"X",value:this.state.endPoint.x,type:"number",InputLabelProps:{shrink:!0},margin:"normal",onChange:this.onInsertionValueChanged("endPoint","x")}),r.a.createElement(ht.a,{style:{margin:"15px"},label:"Y",value:this.state.endPoint.y,type:"number",InputLabelProps:{shrink:!0},margin:"normal",onChange:this.onInsertionValueChanged("endPoint","y")})),r.a.createElement(st.a,{style:{margin:"10px"},variant:"extendedFab",color:"secondary",onClick:this.applyOperation},"Visualize")))}}]),t}(n.Component),Jt=Object(Z.withStyles)(Kt)(Qt),Yt=a(101),$t=a.n(Yt),Zt=function e(){Object(l.a)(this,e)};Zt.quantizeImage=function(e,t){for(var a=Math.pow(2,t)-1,n=0;n<e.getHeight();n++)for(var r=0;r<e.getWidth();r++){var i=e.getBrightness(r,n),o=Math.round(a*i/(le.MAX_PIXEL_VALUE-1)),l=Math.floor(o*(le.MAX_PIXEL_VALUE-1)/a);e.setBrightness(r,n,l)}};var ea=Zt,ta=function e(){Object(l.a)(this,e)};ta.MAX_VALUE=5,ta.MIN_VALUE=1,ta.resample=function(e,t,a){for(var n=0;n<e.getHeight();n++)for(var r=0;r<e.getWidth();r++)if(r%t==0&&n%a==0){for(var i=[],o=r;o<r+t;o++)for(var l=n;l<n+a;l++)if(o<e.getWidth()&&l<e.getHeight()){var s=e.getRGBAComponents(o,l);i.push({i:o,j:l,rgbcolor:s})}for(var c={r:0,g:0,b:0,a:0},u=0;u<i.length;u++)c.r+=i[u].rgbcolor.r,c.g+=i[u].rgbcolor.g,c.b+=i[u].rgbcolor.b,c.a+=i[u].rgbcolor.a;c=Object.values(c).map(function(e){return e/(t*a)});for(var g=0;g<i.length;g++)e.setRGBAComponets(i[g].i,i[g].j,c[0],c[1],c[2],c[3])}};var aa=ta,na={root:{width:400,display:"flex",justifyContent:"flex-start",alignItems:"center",alignContent:"space-between",margin:"auto"},slider:{padding:"22px 0px",margin:"auto"},thumb:{background:ae.palette.secondary.main},formControl:{margin:ae.spacing.unit,minWidth:120}},ra=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={quantizationLevel:8,resampleRows:1,resampleCols:1},a.applyOperation=function(){var e=a.props.controller;e.isAnyImageSelected()&&(e.getSelectedImage().createNewState(),e.getSelectedImage().setNextState(),aa.resample(e.getSelectedImage(),a.state.resampleRows,a.state.resampleCols),ea.quantizeImage(e.getSelectedImage(),a.state.quantizationLevel),e.updateImageHistogram(),e.updateImageCanvas(),e.updateMethod())},a.onQuantizationLevelChange=function(e,t){a.setState({quantizationLevel:t})},a.onQuantizationLevelTextChange=function(e){var t=Number.parseInt(e.target.value);t>le.MIN_PIXEL_VALUE&&t<=Math.log2(le.MAX_PIXEL_VALUE)&&a.setState({quantizationLevel:t})},a.onResampleSizeChange=function(e){var t=Number.parseInt(e.target.value),n=a.props.controller.getSelectedImage();t>0&&t<=Math.min(n.getWidth(),n.getHeight())&&a.setState(Object(_.a)({},e.target.name,t))},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;this.props.controller;return r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(Le.a,{style:{padding:"5px"}},"image_aspect_ratio"),r.a.createElement(ie.a,{variant:"overline"},"Quantizer")),r.a.createElement(pe.a,null),r.a.createElement("div",{style:{width:"180px",margin:"auto"}},r.a.createElement(gt.a,{classes:{container:e.slider,track:e.thumb,thumb:e.thumb},value:this.state.quantizationLevel,min:le.MIN_PIXEL_VALUE+1,max:Math.log2(le.MAX_PIXEL_VALUE),step:1,onChange:this.onQuantizationLevelChange}),r.a.createElement(ht.a,{style:{margin:"15px"},value:this.state.quantizationLevel,type:"number",InputProps:{endAdornment:r.a.createElement($t.a,{position:"start"},"bits")},onChange:this.onQuantizationLevelTextChange,color:"secondary"}),r.a.createElement(ht.a,{name:"resampleRows",style:{margin:"15px"},value:this.state.resampleRows,type:"number",InputProps:{endAdornment:r.a.createElement($t.a,{position:"start"},"rows")},onChange:this.onResampleSizeChange,color:"secondary"}),r.a.createElement(ht.a,{name:"resampleCols",style:{margin:"15px"},value:this.state.resampleCols,type:"number",InputProps:{endAdornment:r.a.createElement($t.a,{position:"start"},"columns")},onChange:this.onResampleSizeChange,color:"secondary"}),r.a.createElement(h.a,{style:{margin:"10px"},variant:"extendedFab",color:"secondary",onClick:this.applyOperation},"Apply quantization")))}}]),t}(n.Component),ia=Object(Z.withStyles)(na)(ra),oa=function e(){Object(l.a)(this,e)};oa.applyGeometricChange=function(e){for(var t=new le(e.getTitle(),e.getWidth(),e.getHeight(),e.getImageData().data),a=0;a<t.getHeight()-1;a++)for(var n=0;n<t.getWidth()-1;n++){var r=t.getRGBAComponents(n,a);e.setRGBAComponets(n,t.getHeight()-1-a,r.r,r.g,r.b,r.a)}};var la=oa,sa=function e(){Object(l.a)(this,e)};sa.applyGeometricChange=function(e){for(var t=new le(e.getTitle(),e.getWidth(),e.getHeight(),e.getImageData().data),a=0;a<t.getHeight()-1;a++)for(var n=0;n<t.getWidth()-1;n++){var r=t.getRGBAComponents(n,a);e.setRGBAComponets(t.getWidth()-1-n,a,r.r,r.g,r.b,r.a)}};var ca=sa,ua=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={flipType:"",labelWidth:0},a.applyOperation=function(){var e=a.props.controller;e.getSelectedImage().createNewState(),e.getSelectedImage().setNextState(),"vertical"===a.state.flipType?la.applyGeometricChange(e.getSelectedImage()):ca.applyGeometricChange(e.getSelectedImage()),e.updateImageHistogram(),e.updateImageCanvas(),e.updateMethod()},a.handleFormChange=function(e){a.setState(Object(_.a)({},e.target.name,e.target.value))},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",null,r.a.createElement(T.a,{variant:"outlined",className:t.formControl},r.a.createElement(Ce.a,{ref:function(t){e.InputLabelRef=t},htmlFor:"outlined-flipType-simple"},"Flyp type"),r.a.createElement(ye.a,{value:this.state.flipType,onChange:this.handleFormChange,input:r.a.createElement(ve.a,{labelWidth:this.state.labelWidth,name:"flipType",id:"outlined-flipType-simple"})},r.a.createElement(p.a,{key:"horizontal",value:"horizontal"},"Horizontal"),r.a.createElement(p.a,{key:"vertical",value:"vertical"},"Vertical"))),r.a.createElement(h.a,{variant:"fab",color:"secondary","aria-label":"Add",onClick:this.applyOperation},r.a.createElement(Me.a,null)))}}]),t}(n.Component),ga=Object(Z.withStyles)(function(e){return{formControl:{margin:e.spacing.unit,width:100},button:{margin:e.spacing.unit}}})(ua),ma=function e(){Object(l.a)(this,e)};ma.applyGeometricChange=function(e){for(var t=[],a=0,n=0;n<e.getHeight();n++){for(var r=0;r<e.getWidth();r++,a+=4*e.getHeight()){var i=e.getRGBAComponents(r,n);t[a]=i.r,t[a+1]=i.g,t[a+2]=i.b,t[a+3]=i.a}a=4*(n+1)}e.setNewState(Uint8ClampedArray.from(t),e.getHeight(),e.getWidth()),e.setNextState()};var ha=ma,da=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={error:!1,errorMsg:"error"},a.handleError=function(e){a.setState({error:!0,errorMsg:e})},a.closeError=function(e){a.setState({error:!1})},a.applyOperation=function(){var e=a.props.controller.getSelectedImage();ha.applyGeometricChange(e),a.props.controller.updateImageHistogram(),a.props.controller.updateImageCanvas(),a.props.controller.updateMethod()},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(h.a,{variant:"fab",color:"secondary","aria-label":"Add",onClick:this.applyOperation},r.a.createElement(Me.a,null))),r.a.createElement(he,{open:this.state.error,errorMsg:this.state.errorMsg,handler:this.closeError}))}}]),t}(n.Component),pa=function e(t,a){var n=this;Object(l.a)(this,e),this.perform=function(e,t){var a=Math.round(n.horizontalFactor*e.getWidth()),r=Math.round(n.verticalFactor*e.getHeight());e.createNewBlankState(a,r),e.setNextState();for(var i=1;i<e.getWidth()-1;i++)for(var o=1;o<e.getHeight()-1;o++){var l={x:i/n.horizontalFactor,y:o/n.verticalFactor};e.setPreviousState();var s=t.interpolateColor(e,l);e.setNextState(),e.setBrightness(i,o,s),e.setAlphaComponent(i,o,255)}e.setNextState()},this.setVerticalFactorFromWidth=function(e,t){n.setVerticalFactor(t/e)},this.setHoorizontalFactorFromHeight=function(e,t){n.setHorizontalFactor(t/e)},this.setFactor=function(e){n.setVerticalFactor(e),n.setHorizontalFactor(e)},this.setVerticalFactor=function(t){e.factorIsValid(t)&&(n.verticalFactor=t)},this.setHorizontalFactor=function(t){e.factorIsValid(t)&&(n.horizontalFactor=t)},this.setVerticalFactor(a),this.setHorizontalFactor(t)};pa.FACTOR_MIN=.1,pa.FACTOR_MAX=4,pa.factorIsValid=function(e){return void 0!==e&&e>=pa.FACTOR_MIN&&e<=pa.FACTOR_MAX};var fa=pa,va=function(){function e(){var t=this;Object(l.a)(this,e),this.getNeighbourhood=function(e,a){var n=Math.floor(a.x),r=Math.floor(a.y);return{A:t.getNeighbour(e,n,r),B:t.getNeighbour(e,n+1,r),C:t.getNeighbour(e,n,r+1),D:t.getNeighbour(e,n+1,r+1)}},this.getNeighbour=function(a,n,r){return{x:n,y:r,color:t.isInBounds(a,n,r)?a.getBrightness(n,r):e.OVER_LIMITS_COLOR}}}return Object(s.a)(e,[{key:"isInBounds",value:function(e,t,a){return t>=0&&t<e.getWidth()&&a>=0&&a<e.getHeight()}}]),e}();va.OVER_LIMITS_COLOR=0;var ba=va,ya=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).interpolateColor=function(e,t){for(var n,r=a.getPositionBound(e,t),i=a.getNeighbourhood(e,t),o=Object.keys(i),l=0;l<o.length;l++){var s=i[o[l]];s.x===r.x&&s.y===r.y&&(n=o[l])}return i[n].color},a.getPositionBound=function(e,t){var a=Math.round(t.x),n=Math.round(t.y);return{x:a<e.getWidth()?a:a-1,y:n<e.getHeight()?n:n-1}},a}return Object(g.a)(t,e),t}(ba),Ea=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).interpolateColor=function(e,t){var n=a.getNeighbourhood(e,t),r=Math.floor(t.x),i=Math.floor(t.y),o=t.x-r,l=t.y-i,s=n.A.color,c=n.B.color,u=n.C.color,g=(s+n.D.color-c-u)*o*l+(u-s)*l+(c-s)*o+s;return a.clampResult(g)},a.clampResult=function(e){var t=Math.round(e);return t<le.MIN_PIXEL_VALUE&&(t=le.MIN_PIXEL_VALUE),t>=le.MAX_PIXEL_VALUE&&(t=le.MAX_PIXEL_VALUE-1),t},a}return Object(g.a)(t,e),t}(ba),Ca={root:{width:400,display:"flex",justifyContent:"flex-start",alignItems:"center",alignContent:"space-between",margin:"auto"},slider:{width:"180px",margin:"auto"},thumb:{background:ae.palette.secondary.main},formControl:{margin:ae.spacing.unit,minWidth:120}},Ia={nearestNeighbour:new ya,bilineal:new Ea},xa=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).interpolatorsText=["nearestNeighbour","bilineal"],a.state={xFactor:fa.FACTOR_MIN,yFactor:fa.FACTOR_MIN,selectedInterpolator:a.interpolatorsText[0]},a.getSelectedInterpolator=function(){return Ia[a.state.selectedInterpolator]},a.applyOperation=function(){var e=a.props.controller;if(e.isAnyImageSelected()){var t=e.getSelectedImage(),n=a.getSelectedInterpolator(),r=a.getFactor();new fa(r.x,r.y).perform(t,n),t.setNextState(),e.updateImageHistogram(),e.updateImageCanvas(),e.resetActionMethod(void 0),e.updateMethod()}},a.getFactor=function(){return{x:a.state.xFactor,y:a.state.yFactor}},a.onFactorChanged=function(e){return function(t,n){a.setState(Object(_.a)({},e,n))}},a.onFactorTextChanged=function(e){return function(t){var n=Number.parseFloat(t.target.value);fa.factorIsValid(n)&&a.setState(Object(_.a)({},e,n))}},a.onInterpolatorSelected=function(e){a.setState({selectedInterpolator:e.target.value})},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(Le.a,{style:{padding:"5px"}},"image_aspect_ratio"),r.a.createElement(ie.a,{variant:"overline"},"Scaling")),r.a.createElement(H.a,null),r.a.createElement(T.a,{className:e.formControl},r.a.createElement(ye.a,{value:this.state.selectedInterpolator,onChange:this.onInterpolatorSelected,autoWidth:!0},this.interpolatorsText.map(function(e){return r.a.createElement(p.a,{key:e,value:e},e)}))),r.a.createElement("div",{className:e.root},r.a.createElement(ie.a,{variant:"caption",style:{margin:10}},"Horizontal factor"),r.a.createElement(We.a,{classes:{container:e.slider,track:e.thumb,thumb:e.thumb},min:fa.FACTOR_MIN,max:fa.FACTOR_MAX,value:this.state.xFactor,"aria-labelledby":"label",onChange:this.onFactorChanged("xFactor")}),r.a.createElement(Pe.a,{style:{margin:"15px"},value:this.state.xFactor,type:"number",margin:"normal",onChange:this.onFactorTextChanged("xFactor"),color:"secondary"})),r.a.createElement("div",{className:e.root},r.a.createElement(ie.a,{variant:"caption",style:{margin:10}},"Vertical factor"),r.a.createElement(We.a,{classes:{container:e.slider,track:e.thumb,thumb:e.thumb},min:fa.FACTOR_MIN,max:fa.FACTOR_MAX,value:this.state.yFactor,"aria-labelledby":"label",onChange:this.onFactorChanged("yFactor")}),r.a.createElement(Pe.a,{style:{margin:"15px"},value:this.state.yFactor,type:"number",margin:"normal",onChange:this.onFactorTextChanged("yFactor"),color:"secondary"})),r.a.createElement(h.a,{style:{margin:"10px"},variant:"extendedFab",color:"secondary",onClick:this.applyOperation},"Apply Scaling"))}}]),t}(n.Component),Oa=Object(Z.withStyles)(Ca)(xa),Aa=function e(){Object(l.a)(this,e)};Aa.applyGeometricChange=function(e,t){for(var a=t/360*4-4*parseInt(t/360,10),n=new le(e.getTitle(),e.getWidth(),e.getHeight(),e.getImageData().data),r=[];a>0;a--){for(var i=n.getWidth()-1;i>=0;i--)for(var o=0;o<n.getHeight();o++){var l=n.getRGBAComponents(i,o);r.push(l.r),r.push(l.g),r.push(l.b),r.push(l.a)}n=Aa.newImage(n,r),r=[]}e.setNewState(Uint8ClampedArray.from(n.getImageData().data),n.getWidth(),n.getHeight()),e.setNextState()},Aa.newImage=function(e,t){return new le(e.getTitle(),e.getHeight(),e.getWidth(),Uint8ClampedArray.from(t))};var Sa=Aa,ja=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={rotationDegrees:"",labelWidth:0},a.applyOperation=function(){var e=a.props.controller.getSelectedImage();Sa.applyGeometricChange(e,a.state.rotationDegrees),a.props.controller.updateImageHistogram(),a.props.controller.updateImageCanvas(),a.props.controller.updateMethod()},a.handleFormChange=function(e){a.setState(Object(_.a)({},e.target.name,e.target.value))},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",null,r.a.createElement(T.a,{variant:"outlined",className:t.formControl},r.a.createElement(Ce.a,{ref:function(t){e.InputLabelRef=t},htmlFor:"outlined-rotationDegrees-simple"},"Degrees"),r.a.createElement(ye.a,{value:this.state.rotationDegrees,onChange:this.handleFormChange,input:r.a.createElement(ve.a,{labelWidth:this.state.labelWidth,name:"rotationDegrees",id:"outlined-rotationDegrees-simple"})},r.a.createElement(p.a,{key:"0",value:"0"},"0\xba"),r.a.createElement(p.a,{key:"90",value:"90"},"90\xba"),r.a.createElement(p.a,{key:"180",value:"180"},"180\xba"),r.a.createElement(p.a,{key:"270",value:"270"},"270\xba"))),r.a.createElement(h.a,{variant:"fab",color:"secondary","aria-label":"Add",onClick:this.applyOperation},r.a.createElement(Me.a,null)))}}]),t}(n.Component),Ma=Object(Z.withStyles)(function(e){return{formControl:{margin:e.spacing.unit,width:100},button:{margin:e.spacing.unit}}})(ja),wa=function(){function e(){var t=this;Object(l.a)(this,e),this.createNewImageState=function(e,a){var n=t.getNewImageWidthAndHeight(e,a);e.createNewBlankState(n.width,n.height)},this.getImageCorners=function(e){var t=e.getWidth()-1,a=e.getHeight()-1;return{topLeft:{x:0,y:0},topRight:{x:t,y:0},bottomLeft:{x:0,y:a},bottomRight:{x:t,y:a}}},this.getRotatedImageCorners=function(e,a){for(var n=t.getImageCorners(e),r={},i=Object.keys(n),o=0;o<i.length;o++){var l=i[o];r[l]=t.getRotationPosition(a,n[l])}return r},this.getNewImageWidthAndHeight=function(e,a){var n=t.getRotatedImageCorners(e,a),r=t.getMinMaxCorners(n);return{width:Math.round(Math.abs(r.max.x-r.min.x)),height:Math.round(Math.abs(r.max.y-r.min.y))}},this.getMinMaxCorners=function(e){for(var t=[],a=[],n=Object.keys(e),r=0;r<n.length;r++){var i=n[r];t.push(e[i].x),a.push(e[i].y)}return{min:{x:Math.min.apply(Math,t),y:Math.min.apply(Math,a)},max:{x:Math.max.apply(Math,t),y:Math.max.apply(Math,a)}}},this.getRotationPosition=function(e,t){var a=t.x,n=t.y,r=e*Math.PI/180;return{x:a*Math.cos(r)+n*Math.sin(r),y:-a*Math.sin(r)+n*Math.cos(r)}},this.getDirectPosition=function(e,a,n){var r=t.getRotationPosition(e,a),i=r.x,o=r.y;return{x:i+Math.abs(n.min.x),y:o+Math.abs(n.min.y)}},this.getInversePosition=function(e,t,a){var n=t.x,r=t.y,i=Math.abs(a.min.x),o=Math.abs(a.min.y),l=e*Math.PI/180;return{x:(n-i)*Math.cos(l)+(o-r)*Math.sin(l),y:(n-i)*Math.sin(l)+(r-o)*Math.cos(l)}},this.clampIndexes=function(e,t){for(var a=Object.keys(t),n=0;n<a.length;n++){var r=a[n];t[r]=Math.round(t[r]),t[r]<0&&(t[r]=0)}t.x>=e.getWidth()&&(t.x=e.getWidth()-1),t.y>=e.getHeight()&&(t.y=e.getHeight()-1)}}return Object(s.a)(e,null,[{key:"angleIsValid",value:function(t){return t>=e.MIN_ANGLE&&t<=e.MAX_ANGLE}}]),e}();wa.MIN_ANGLE=-360,wa.MAX_ANGLE=360;var Na=wa,ka=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).perform=function(e,t){var n=a.getRotatedImageCorners(e,t),r=a.getMinMaxCorners(n);a.createNewImageState(e,t);for(var i=0;i<e.getWidth();i++)for(var o=0;o<e.getHeight();o++){var l=e.getBrightness(i,o),s=a.getDirectPosition(t,{x:i,y:o},r);e.setNextState(),a.clampIndexes(e,s),e.setBrightness(s.x,s.y,l),e.setAlphaComponent(s.x,s.y,255),e.setPreviousState()}},a}return Object(g.a)(t,e),t}(Na),_a=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).perform=function(e,t,n){var r=a.getRotatedImageCorners(e,t),i=a.getMinMaxCorners(r);a.createNewImageState(e,t),e.setNextState();for(var o=0;o<e.getWidth();o++)for(var l=0;l<e.getHeight();l++){var s=a.getInversePosition(t,{x:o,y:l},i);if(e.setPreviousState(),a.positionIsValid(s,e)){var c=n.interpolateColor(e,s);e.setNextState(),e.setBrightness(o,l,c),e.setAlphaComponent(o,l,255)}e.setNextState()}},a.positionIsValid=function(e,t){return e.x>=0&&e.x<t.getWidth()&&e.y>=0&&e.y<t.getHeight()},a}return Object(g.a)(t,e),t}(Na),Pa={root:{width:400,display:"flex",justifyContent:"flex-start",alignItems:"center",alignContent:"space-between",margin:"auto"},slider:{width:"180px",margin:"auto"},thumb:{background:ae.palette.secondary.main},formControl:{margin:ae.spacing.unit,minWidth:120}},Va=(Na.MAX_ANGLE+Na.MIN_ANGLE)/2,La=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).interpolators={nearestNeighbour:new ya,bilineal:new Ea},a.rotationMethods={raw:new ka,interpolated:new _a},a.state={angle:Va,selectedInterpolator:Object.keys(a.interpolators)[0],selectedRotationMethod:Object.keys(a.rotationMethods)[0]},a.applyOperation=function(){var e=a.props.controller;if(e.isAnyImageSelected()){var t=e.getSelectedImage(),n=a.state.angle;a.getRotationMethod().perform(t,n,a.getInterpolator()),t.setNextState(),e.updateImageHistogram(),e.updateImageCanvas(),e.resetActionMethod(void 0),e.updateMethod()}},a.getRotationMethod=function(){return a.rotationMethods[a.state.selectedRotationMethod]},a.getInterpolator=function(){return a.interpolators[a.state.selectedInterpolator]},a.onAngleChanged=function(e,t){a.setState({angle:t})},a.onAngleTextChanged=function(e){var t=Number.parseFloat(e.target.value);Na.angleIsValid(t)&&a.setState({angle:t})},a.onInterpolatorSelected=function(e){a.setState({selectedInterpolator:e.target.value})},a.onRotationMethodSelected=function(e){a.setState({selectedRotationMethod:e.target.value})},a.interpolatorSelectorDisabled=function(){return"interpolated"!==a.state.selectedRotationMethod},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(Ze.a,{style:{padding:"5px"}},"crop_rotate"),r.a.createElement(tt.a,{variant:"overline"},"Rotation")),r.a.createElement(nt.a,null),r.a.createElement(Ot.a,{className:e.formControl},r.a.createElement(Mt.a,{value:this.state.selectedRotationMethod,onChange:this.onRotationMethodSelected,autoWidth:!0},Object.keys(this.rotationMethods).map(function(e){return r.a.createElement(Nt.a,{key:e,value:e},e)}))),r.a.createElement(Ot.a,{className:e.formControl},r.a.createElement(Mt.a,{value:this.state.selectedInterpolator,onChange:this.onInterpolatorSelected,disabled:this.interpolatorSelectorDisabled(),autoWidth:!0},Object.keys(this.interpolators).map(function(e){return r.a.createElement(Nt.a,{key:e,value:e},e)}))),r.a.createElement("div",{className:e.root},r.a.createElement(tt.a,{variant:"caption",style:{margin:10}},"Horizontal factor"),r.a.createElement(gt.a,{classes:{container:e.slider,track:e.thumb,thumb:e.thumb},min:Na.MIN_ANGLE,max:Na.MAX_ANGLE,value:this.state.angle,"aria-labelledby":"label",onChange:this.onAngleChanged}),r.a.createElement(ht.a,{style:{margin:"15px"},value:this.state.angle,type:"number",margin:"normal",onChange:this.onAngleTextChanged,color:"secondary"})),r.a.createElement(st.a,{style:{margin:"10px"},variant:"extendedFab",color:"secondary",onClick:this.applyOperation},"Apply Rotation"))}}]),t}(n.Component),Ha=Object(Z.withStyles)(Pa)(La),Ra={load_img:function(e){return r.a.createElement(de,{controller:e})},save_img:function(e){return r.a.createElement(Se,{controller:e})},black_white:function(e){return r.a.createElement(ke,{controller:e})},lineal_adjustment:function(e){return r.a.createElement(Be,{controller:e})},brightness_contrast:function(e){return r.a.createElement(qe,{controller:e})},histogram_equalization:function(e){return r.a.createElement(Ye,{controller:e})},histogram_specification:function(e){return r.a.createElement(ct,{controller:e})},gamma_correction:function(e){return r.a.createElement(It,{controller:e})},image_difference:function(e){return r.a.createElement(_t,{controller:e})},changes_detection:function(e){return r.a.createElement(Ft,{controller:e})},cross_image:function(e){return r.a.createElement(Jt,{controller:e})},image_flipper:function(e){return r.a.createElement(ga,{controller:e})},image_transpose:function(e){return r.a.createElement(da,{controller:e})},scale_image:function(e){return r.a.createElement(Oa,{controller:e})},rotate_image:function(e){return r.a.createElement(Ma,{controller:e})},rotation:function(e){return r.a.createElement(Ha,{controller:e})},image_quantization:function(e){return r.a.createElement(ia,{controller:e})}},Fa=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(s.a)(t,[{key:"renderAction",value:function(){var e=this.props.currentAction,t=this.props.controller;return void 0===e?r.a.createElement(ie.a,null,"Pick any action from the menu."):Ra[e](t)}},{key:"render",value:function(){return r.a.createElement(C.a,{style:{height:"100%"}},this.renderAction())}}]),t}(n.Component),Xa=a(22),Ta=a(188),Ba=a.n(Ta),Da=a(189),Wa=a.n(Da),Ga=a(190),Ua=a.n(Ga),za=a(191),qa=a.n(za),Ka=a(61),Qa=a.n(Ka),Ja=20,Ya=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e,t){a.props.controller.updateSelectedImage(t)},a.handleCloseEvent=function(e,t){a.props.controller.delete(a.props.controller.getImageIndex(t)),e.stopPropagation()},a.reduceTittle=function(e){return e.length>Ja&&(e=e.slice(0,e.length).replace(/.{3}$/i,"...")),e},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,a=this.props.controller;return r.a.createElement("div",{className:t.root},r.a.createElement(Ba.a,{style:{width:"71vw"},position:"static",color:"default"},r.a.createElement(Wa.a,{value:this.props.controller.getSelectedImageIndex(),onChange:this.handleChange,scrollable:!0,scrollButtons:"auto"},a.getImageTitles().map(function(t){return r.a.createElement(Ua.a,{component:"div",key:t,label:r.a.createElement("div",null,e.reduceTittle(t),r.a.createElement(Qa.a,{style:{marginRight:"-20%"},color:"secondary","aria-label":"Add an alarm",onClick:function(a){return e.handleCloseEvent(a,t)}},r.a.createElement(qa.a,null)))})}))))}}]),t}(r.a.Component),$a=Object(Z.withStyles)(function(e){return{root:{flexGrow:1,width:"100%"}}})(Ya),Za=a(192),en=a.n(Za),tn={padding:"10px",display:"flex",justifyContent:"space-between",alignItems:"center"},an=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).calculateColor=function(){var e=a.props.controller.getSelectedImage(),t=a.props.position,n=t.x,r=t.y;return void 0!==e&&e.indexesAreInRange(n,r)&&-1!==n&&-1!==r?"rgb("+e.getRedComponent(n,r)+", "+e.getGreenComponent(n,r)+", "+e.getBlueComponent(n,r)+")":"white"},a.calculateColorText=function(){var e=a.props.controller.getSelectedImage(),t=a.props.position,n=t.x,r=t.y;return void 0!==e&&e.indexesAreInRange(n,r)&&-1!==n&&-1!==r?"r:"+e.getRedComponent(n,r)+" g:"+e.getGreenComponent(n,r)+" b:"+e.getBlueComponent(n,r)+" ":"r:- g:- b:-"},a.calculatePosition=function(){var e=a.props.controller.getSelectedImage(),t=a.props.position,n=t.x,r=t.y;return void 0===e||-1===n||-1===r?"x:- y:-":"x:"+n+" y:"+r},a.duplicateActualImage=function(){if(a.props.controller.numberOfImages()>0){var e=a.props.controller.getSelectedImage(),t=new le(e.getTitle()+" - Duplicated."+e.getFormat(),e.getWidth(),e.getHeight(),e.getImageData().data);a.props.controller.add(t)}},a.updateImageState=function(e){return function(){var t=a.props.controller,n=t.getSelectedImage();if(void 0!==n){switch(e){case"undo":n.setPreviousState();break;case"redo":n.setNextState();break;case"restore":n.setInitialState()}t.updateImageHistogram(),t.updateImageCanvas(),t.resetActionMethod(void 0),t.updateMethod()}}},a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(C.a,{style:tn},r.a.createElement("div",null,r.a.createElement($.a,{avatar:r.a.createElement(en.a,{style:{background:this.calculateColor()}}),style:{marginRight:"5px"},label:this.calculateColorText(),color:"secondary",variant:"outlined"}),r.a.createElement($.a,{label:this.calculatePosition(),color:"secondary",variant:"outlined"})),r.a.createElement("div",null,r.a.createElement("span",{style:{borderRight:"1px solid #babdbe"}},r.a.createElement(Qa.a,{color:"secondary",onClick:this.duplicateActualImage},r.a.createElement(Le.a,null,"add_to_photos"))),r.a.createElement(Qa.a,{color:"secondary",onClick:this.updateImageState("undo")},r.a.createElement(Le.a,null,"undo")),r.a.createElement(Qa.a,{color:"secondary",onClick:this.updateImageState("restore")},r.a.createElement(Le.a,null,"compare")),r.a.createElement(Qa.a,{color:"secondary",onClick:this.updateImageState("redo")},r.a.createElement(Le.a,null,"redo"))))}}]),t}(n.Component),nn=a(193),rn=a.n(nn),on=(a(82),{background:ae.palette.primary.main,height:"100%",width:"71vw",display:"flex",flexDirection:"column",alignContent:"stretch"}),ln={display:"flex",justifyContent:"center",alignItems:"center",height:"95%",overflow:"auto"},sn={background:"rgba(0, 102, 204, 0.5)"},cn=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={x:-1,y:-1,regions:[]},a.canvasMovement=function(e){a.setState({x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY})},a.mouseLeaved=function(e){a.setState({x:-1,y:-1})},a.setCropState=function(){a.state.cropEnabled=!a.state.cropEnabled},a.handleCrop=function(){var e=a.props.controller.getSelectedImage(),t=e.getWidth()*(a.state.regions[0].x/100),n=e.getHeight()*(a.state.regions[0].y/100),r=e.getWidth()*(a.state.regions[0].width/100),i=e.getHeight()*(a.state.regions[0].height/100),o=a.props.controller.getCanvas().getContext("2d").getImageData(t,n,r,i);a.handleKeyPress();var l=new le(e.getTitle()+" - Copy."+e.getFormat(),o.width,o.height,o.data);a.props.controller.add(l)},a.handleKeyPress=function(){a.setState({regions:[]})},a.canvasRef=r.a.createRef(),a.regionRenderer=a.regionRenderer.bind(Object(Xa.a)(Object(Xa.a)(a))),a.updateRegions=a.updateRegions.bind(Object(Xa.a)(Object(Xa.a)(a))),a.props.keyController("Escape",a.handleKeyPress),a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.controller.setCanvas(this.canvasRef.current)}},{key:"updateRegions",value:function(e){this.props.controller.numberOfImages()>0&&this.setState({regions:e})}},{key:"regionRenderer",value:function(e){if(!e.isChanging)return r.a.createElement("div",{style:{position:"absolute",bottom:"-2.5em"}},r.a.createElement(h.a,{variant:"contained",color:"secondary",onClick:this.handleCrop},"Crop"))}},{key:"render",value:function(){var e={display:this.props.controller.numberOfImages>0?"none":"block"};return r.a.createElement(C.a,{style:on},r.a.createElement($a,{controller:this.props.controller}),r.a.createElement("div",{style:ln},r.a.createElement(rn.a,{maxRegions:1,regions:this.state.regions,regionStyle:sn,constraint:!0,regionRenderer:this.regionRenderer,onChange:this.updateRegions,style:e},r.a.createElement("canvas",{ref:this.canvasRef,onMouseMove:this.canvasMovement,onMouseLeave:this.mouseLeaved},"Your browser do not support canvas"))),r.a.createElement(an,{position:this.state,controller:this.props.controller}))}}]),t}(n.Component),un=(a(403),{textDecoration:"none",color:ae.palette.secondary.main});var gn=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ie.a,null,r.a.createElement("span",null,"By "),r.a.createElement("a",{style:un,href:"https://github.com/CristianAbrante"},"Cristian Abrante"),r.a.createElement("span",null," & "),r.a.createElement("a",{style:un,href:"https://github.com/AlberTJ97"},"Alberto Gonz\xe1lez")))},mn=function e(t){var a=this;Object(l.a)(this,e),this.count={r:[],g:[],b:[],brightness:[]},this.accumulative={r:[],g:[],b:[],brightness:[]},this.min={r:0,g:0,b:0,brightness:0},this.max={r:0,g:0,b:0,brightness:0},this.mean={r:0,g:0,b:0,brightness:0},this.stdVar={r:0,g:0,b:0,brightness:0},this.entropy={r:0,g:0,b:0,brightness:0},this.setImage=function(e){a.image=e,a.setCount(),a.setAccumulativeCount(),a.setMean(),a.setStdVar(),a.setMinMax(),a.setEntropy()},this.getCount=function(e){return{r:a.count.r[e],g:a.count.g[e],b:a.count.b[e],brightness:a.count.brightness[e]}},this.getAccumulativeCount=function(e){return{r:a.accumulative.r[e],g:a.accumulative.g[e],b:a.accumulative.b[e],brightness:a.accumulative.brightness[e]}},this.getProbability=function(e){return{r:a.getCount(e).r/a.getNumberOfPixels(),g:a.getCount(e).g/a.getNumberOfPixels(),b:a.getCount(e).b/a.getNumberOfPixels(),brightness:a.getCount(e).brightness/a.getNumberOfPixels()}},this.getAccumulativeProbability=function(e){return{r:a.getAccumulativeCount(e).r/a.getNumberOfPixels(),g:a.getAccumulativeCount(e).g/a.getNumberOfPixels(),b:a.getAccumulativeCount(e).b/a.getNumberOfPixels(),brightness:a.getAccumulativeCount(e).brightness/a.getNumberOfPixels()}},this.getMean=function(){return a.mean},this.getStdVar=function(){return a.stdVar},this.getMax=function(){return a.max},this.getMin=function(){return a.min},this.getEntropy=function(){return a.entropy},this.getImage=function(){return a.image},this.getImageWidth=function(){return a.getImage().getWidth()},this.getImageHeight=function(){return a.getImage().getHeight()},this.getNumberOfPixels=function(){return a.getImage().getNumberOfPixels()},this.getFormattedCount=function(e){return a.formatData(a.count[e])},this.getFormattedAccumulativeCount=function(e){return a.formatData(a.accumulative[e])},this.getFormattedData=function(e,t){return t?a.getFormattedAccumulativeCount(e):a.getFormattedCount(e)},this.formatData=function(e){for(var t=[],a=0;a<e.length;a++)t.push({x:a,y:e[a]});return t},this.initializeObject=function(e){for(var t=Object.keys(e),a=0;a<t.length;a++)e[t[a]]=Array.apply(null,Array(le.MAX_PIXEL_VALUE)).fill(0)},this.setCount=function(){a.initializeObject(a.count);for(var e=Object.keys(a.count),t=0;t<a.getImageWidth();t++)for(var n=0;n<a.getImageHeight();n++)if(0!==a.image.getAlphaComponent(t,n))for(var r=0;r<e.length;r++){var i=e[r],o=a.image.getColor(t,n,i);a.count[i][o]+=1}},this.setAccumulativeCount=function(){a.initializeObject(a.accumulative);for(var e=Object.keys(a.accumulative),t=0;t<e.length;t++){var n=e[t];a.accumulative[n][0]=a.getCount(0)[n]}for(var r=1;r<le.MAX_PIXEL_VALUE;r++)for(var i=0;i<e.length;i++){var o=e[i],l=a.getAccumulativeCount(r-1)[o],s=a.getCount(r)[o];a.accumulative[o][r]=l+s}},this.setMean=function(){for(var e=Object.keys(a.mean),t=0;t<le.MAX_PIXEL_VALUE;t++)for(var n=0;n<e.length;n++){var r=e[n];a.mean[r]+=a.getCount(t)[r]*t}for(var i=0;i<e.length;i++){var o=e[i];a.mean[o]/=a.getNumberOfPixels()}},this.setStdVar=function(){for(var e=Object.keys(a.stdVar),t=0;t<le.MAX_PIXEL_VALUE;t++)for(var n=0;n<e.length;n++){var r=e[n];a.stdVar[r]+=a.getCount(t)[r]*Math.pow(t-a.mean[r],2)}for(var i=0;i<e.length;i++){var o=e[i];a.stdVar[o]=Math.sqrt(a.stdVar[o]/a.getNumberOfPixels())}},this.setMinMax=function(){for(var e=Object.keys(a.min),t={},n=0;n<e.length;n++)t[e[n]]=!1;for(var r=0;r<le.MAX_PIXEL_VALUE;r++)for(var i=0;i<e.length;i++){var o=e[i];0!==a.getCount(r)[o]&&(t[o]||(a.min[o]=r,t[o]=!0),a.max[o]=r)}},this.setEntropy=function(){a.entropy={r:0,g:0,b:0,brightness:0};for(var e=Object.keys(a.entropy),t=0;t<le.MAX_PIXEL_VALUE;t++)for(var n=0;n<e.length;n++){var r=e[n],i=a.getProbability(t)[r];0!==i&&i>=0&&(a.entropy[r]+=i*Math.log2(i))}for(var o=0;o<e.length;o++){var l=e[o];a.entropy[l]=-a.entropy[l]}},this.setImage(t)},hn=function(){function e(t,a){var n=this;Object(l.a)(this,e),this.add=function(e){n.images.push(e),n.histograms.push(new mn(e)),n.selected=n.numberOfImages()-1,n.updateImageCanvas(),n.resetActionMethod(void 0),n.updateMethod()},this.delete=function(e){e>-1&&(n.images.splice(e,1),n.histograms.splice(e,1)),n.selected==n.images.length||n.selected>e?n.selected--:e==n.selected&&(e<n.selected||e>n.selected)&&n.selected--,n.updateImageCanvas(),n.resetActionMethod(void 0),n.updateMethod()},this.numberOfImages=function(){return n.images.length},this.getImageTitles=function(){return n.images.map(function(e){return e.getTitle()})},this.setCanvas=function(e){n.canvas=e},this.getCanvas=function(){return n.canvas},this.updateSelectedImage=function(e){n.selected=e,n.updateImageCanvas(),n.resetActionMethod(void 0),n.updateMethod()},this.setImage=function(e,t){n.images[e]=t,n.updateImageCanvas(),n.resetActionMethod(void 0),n.updateMethod()},this.updateImageCanvas=function(){var e=n.getSelectedImage(),t=n.canvas.getContext("2d");void 0!==e?(n.canvas.width=e.getWidth(),n.canvas.height=e.getHeight(),t.putImageData(e.getImageData(),0,0)):t.clearRect(0,0,n.canvas.width,n.canvas.height)},this.getSelectedImage=function(){return n.images[n.getSelectedImageIndex()]},this.getCurrentHistogram=function(){return n.histograms[n.getSelectedImageIndex()]},this.getSelectedImageIndex=function(){return n.selected},this.isAnyImageSelected=function(){return 0!==n.images.length},this.updateImageHistogram=function(){n.histograms[n.getSelectedImageIndex()].setImage(n.getSelectedImage())},this.getImageIndex=function(e){for(var t=n.getImageTitles(),a=0;a<t.length;a++)if(t[a]===e)return a},this.images=[],this.histograms=[],this.updateMethod=t,this.resetActionMethod=a}return Object(s.a)(e,[{key:"applyPointOperation",value:function(e,t){for(var a=this.getSelectedImage(),n=0;n<a.getWidth();n++)for(var r=0;r<a.getHeight();r++){a.setPreviousState();var i=a.getColor(n,r,t);a.setNextState();var o=e.getValue(i);a.setColor(n,r,t,o)}this.updateImageHistogram(),this.updateImageCanvas(),this.updateMethod()}}],[{key:"imageIsValid",value:function(e){return void 0!==e&&(void 0!==e.getImageData()&&void 0)}}]),e}(),dn=a(135),pn=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={controller:void 0,currentAction:void 0,onKeyPressed:void 0,keyAction:void 0},a.updateController=function(){a.setState({controller:a.state.controller})},a.updateCurrentAction=function(e){a.setState({currentAction:e})},a.updateKeyController=function(e,t){a.setState({onKeyPressed:e,keyAction:t})},a.state.controller=new hn(a.updateController,a.updateCurrentAction),a}return Object(g.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(Z.MuiThemeProvider,{theme:ae},r.a.createElement(C.a,{className:"grid-container App"},r.a.createElement(dn.b,{keyEventName:dn.a,keyValue:this.state.onKeyPressed,onKeyHandle:this.state.keyAction}),r.a.createElement("div",{className:"grid-item item-menu"},r.a.createElement(N,{items:k.items,updateAction:this.updateCurrentAction})),r.a.createElement("div",{className:"grid-item item-workspace"},r.a.createElement(cn,{controller:this.state.controller,keyController:this.updateKeyController})),r.a.createElement("div",{className:"grid-item item-info"},r.a.createElement(ne,{controller:this.state.controller})),r.a.createElement("div",{className:"grid-item item-action"},r.a.createElement(Fa,{controller:this.state.controller,currentAction:this.state.currentAction})),r.a.createElement("div",{className:"grid-item item-footer"},r.a.createElement(gn,null))))}}]),t}(n.Component);o.a.render(r.a.createElement(pn,null),document.getElementById("root"))}},[[197,2,1]]]);
//# sourceMappingURL=main.6c29b752.chunk.js.map